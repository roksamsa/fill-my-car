<app-tile-title-top>
  <h2 tile-headline-title class="tile__title">
    Moja potovanja <span class="trip__trips-number">({{trips.length}})</span>
  </h2>
  <button tile-headline-button class="tile__headline-button" (click)="openAddTripDialog()">
    <svg class="tile__headline-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          viewBox="0 0 24 24">
      <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
      <path d="M0 0h24v24H0z" fill="none" />
    </svg>
  </button>

  <app-preloading-spinner tile-content
                          *ngIf="areThereAnyTrips; else emptyTripList"
                          [visibility]="preloadingSpinnerVisibility">

    <div class="table">
      <div *ngFor="let trip of trips; let tripIndex = index;" class="table__row"
        [class.table__row--selected]="moreActionOpened === tripIndex">
        <div class="table__column trip__status trip__status--{{trip?.tripStatus | lowercase}}">
          <div class="trip__status-icon"></div>
        </div>
        <div class="table__column trip__id-tag">
          <div class="table__column-content">
            {{ trip?.tripIdTag }}
          </div>
        </div>

        <div #containerFromLocation class="table__column trip__location trip__location--from">
          <div class="table__column-content">
            {{ trip?.tripFromLocation }}
          </div>
        </div>

        <div class="table__column trip__arrow">
          <svg class="trip__arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path fill="none" d="M0 0h24v24H0z" />
            <path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z" /></svg>
        </div>

        <div class="table__column trip__location trip__location--to">
          <div class="table__column-content">
            {{ trip?.tripToLocation }}
          </div>
        </div>

        <div class="table__column trip__date">
          <div class="table__column-content">
            {{ trip?.tripDate | date: dateFormat }}
          </div>
        </div>

        <div class="table__column trip__additional-data trip__additional-data--time">
          <div class="trip__icon trip__icon--time">
            <svg class="trip__svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" />
              <path d="M0 0h24v24H0z" fill="none" />
              <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
            </svg>
          </div>
          <div class="table__column-content">
            <div class="trip__time-text">
              {{ trip?.tripTime }}
            </div>
          </div>
        </div>

        <div class="table__column trip__additional-data trip__additional-data--luggage-space">
          <div class="trip__icon trip__icon--luggage">
            <svg class="trip__svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <path d="M0 0h24v24H0z" fill="none" />
              <path
                d="M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z" />
            </svg>
          </div>
          <div class="table__column-content">
            <div class="trip__time-text">
              {{ trip?.tripLuggageSpace }}
            </div>
          </div>
        </div>

        <div class="table__column trip__additional-data trip__additional-data--free-seats">
          <div class="trip__icon trip__icon--free-seats">
            <svg class="trip__svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <path d="M0 0h24v24H0z" fill="none" />
              <path
                d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
            </svg>
          </div>
          <div class="table__column-content">
            <div class="trip__time-text">
              {{ trip?.tripFreeSeats }} / {{ vehicle?.vehicleSeats }}
            </div>
          </div>
        </div>

        <div class="table__column trip__additional-data trip__additional-data--price">
          <div class="table__column-content">
            {{ trip?.tripPrice }} EUR
          </div>
        </div>

        <div *ngIf="moreActionOpened !== tripIndex" class="trip__router-link" [routerLink]="['/potovanje/', trip?._id]">
        </div>

        <div *ngIf="moreActionOpened === tripIndex" class="table__column trip__actions">
          <div @moreActionBackgroundAnimation class="trip__actions-background"></div>
          <div @moreActionContainerAnimation class="trip__actions-container">
            <div class="trip__actions-item trip__actions-item--share">
              <svg class="trip__svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M0 0h24v24H0z" fill="none" />
                <path
                  d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z" />
                </svg>
            </div>
            <div class="trip__actions-item trip__actions-item--edit" (click)="openEditVehicleDialog(trip, tripIndex)">
              <svg class="trip__svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path
                  d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                <path d="M0 0h24v24H0z" fill="none" /></svg>
            </div>
            <div class="trip__actions-item trip__actions-item--delete" (click)="deleteTrip(trip._id)">
              <svg class="trip__svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
                <path d="M0 0h24v24H0z" fill="none" /></svg>
            </div>
          </div>
        </div>

        <div class="table__column trip__more" [class.trip__more--selected]="moreActionOpened === tripIndex"
          (click)="moreActionsToggle(tripIndex)">
          <svg class="trip__svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path
              d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
          </svg>
        </div>
      </div>
    </div>
  </app-preloading-spinner>
</app-tile-title-top>

<!-- Element without data-->
<ng-template #emptyTripList>
  <app-preloading-spinner tile-content
                          [visibility]="preloadingSpinnerVisibility">
    <app-empty-data [emptyDataType]="emptyDataType" [emptyDataButtonText]="emptyDataButtonText"
      [emptyDataText]="emptyDataText" [emptyDataIcon]="emptyDataIcon" (clicked)="openAddTripDialog()">
    </app-empty-data>
  </app-preloading-spinner>
</ng-template>